{% extends 'dashboard/dashboard_base.html' %}

{% load i18n static %}

{% block title %}{% trans 'Change Password' %} - {{user.full_name}}{% endblock title %}

{% block main_content %}
<main>
    <header class="page-header page-header-compact page-header-light border-bottom bg-white mb-4">
        <div class="container-xl px-4">
            <div class="page-header-content">
                <div class="row align-items-center justify-content-between pt-3">
                    <div class="col-auto mb-3">
                        <h1 class="page-header-title">
                            <div class="page-header-icon"><i data-feather="user"></i></div>
                            {% trans "Account Settings - Change Password" %}
                        </h1>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main page content-->
    <div class="container-xl px-4 mt-4">
        <!-- Account page navigation-->
        <div class="row d-flex justify-content-center">
            <div class="col-lg-6">
                <!-- Change password card-->
                <div class="card mb-4">
                    <div class="card-header">{% trans 'Change Password' %}</div>
                    <div class="card-body">
                        <form method="post">
                            {% csrf_token %}
                            <!-- Form Group (current password)-->
                            <div class="input-group mb-3">
                                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                                {{form.password}}
                                <button onclick='togglePasswordVisibility("icon-password", "update_password")'
                                    class="btn btn-outline-secondary" type="button">
                                    <i id="icon-password" class="bi bi-eye-fill"></i>
                                </button>
                                {% if form.password.errors %}
                                <div class="alert alert-danger" role="alert">
                                    {{form.password.errors}}
                                </div>
                                {% endif %}
                            </div>

                            <!-- Form Group (new password)-->
                            <div class="input-group mb-3">
                                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                                {{form.new_password}}
                                <button onclick='togglePasswordVisibility("icon-new_password", "update_new_password")'
                                    class="btn btn-outline-secondary" type="button">
                                    <i id="icon-new_password" class="bi bi-eye-fill"></i>
                                </button>
                                {% if form.new_password.errors %}
                                <div class="alert alert-danger" role="alert">
                                    {{form.new_password.errors}}
                                </div>
                                {% endif %}
                            </div>

                            <!-- Form Group (confirm password)-->
                            <div class="input-group mb-3">
                                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                                {{form.confirm_password}}
                                <button onclick='togglePasswordVisibility("icon-confirm_password", "update_confirm_password")'
                                    class="btn btn-outline-secondary" type="button">
                                    <i id="icon-confirm_password" class="bi bi-eye-fill"></i>
                                </button>
                                {% if form.confirm_password.errors %}
                                <div class="alert alert-danger" role="alert">
                                    {{form.confirm_password.errors}}
                                </div>
                                {% endif %}
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" type="submit">{% trans "Save" %}</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock main_content %}